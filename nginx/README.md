# Nginx Configuration

This directory contains the Nginx configuration templates and generated configurations for the deployment.

## Structure

- `nginx.conf.template`: Main Nginx configuration template that includes:
  - Global settings (worker processes, events, etc.)
  - HTTP settings (gzip, SSL, etc.)
  - Cloudflare proxy configuration
  - Placeholder for domain-specific server blocks

- `domain.conf.template`: Template for domain-specific server blocks that includes:
  - Server name configuration
  - Security headers
  - Static file serving
  - Error page handling
  - SPA (Single Page Application) support

## Configuration Generation

The configuration is automatically generated by the GitHub Actions workflow. The process:

1. Reads domains from `domains.txt`
2. Generates server blocks for each domain using `domain.conf.template`
3. Combines all server blocks into the main configuration using `nginx.conf.template`
4. Generates a single `nginx.conf` file
5. Deploys the configuration to the server

## Generated Configuration

The generated configuration is stored in `generated/nginx/nginx.conf`. This file contains:
- All global Nginx settings
- Cloudflare proxy configuration
- Server blocks for all domains

## Requirements

- Cloudflare proxy enabled (orange cloud) for all domains
- Website files in `/var/www/<domain>/` for each domain
- Nginx installed on the server

## Security Features

The configuration includes:
- Cloudflare proxy support
- Security headers (X-Frame-Options, X-XSS-Protection, etc.)
- SSL/TLS configuration
- Gzip compression
- Static file caching 